# Zip 謎題求解器挑戰

本專案致力於探索、開發並比較多種演算法，以解決「Zip」益智遊戲。專案包含了一整套的求解器、程序化謎題生成器，並以一個現代化的網頁服務提供互動介面。

## 關於「Zip」謎題

遊戲的目標是畫一條單一、連續的路徑，走過網格中每一個空格，且每個格子只能走一次。

### 規則
*   路徑必須覆蓋所有可走訪的儲存格，且每個儲存格只能造訪一次。
*   路徑必須按照數字順序（1 → 2 → 3 ...）連接所有的路徑點。
*   路徑不能穿過牆壁（以 `|` 或 `—` 標示）。

## 功能

*   **互動式網頁介面 (Interactive Web UI)**：使用 Gradio 建構，讓使用者可以輕鬆輸入謎題並將解法視覺化。
*   **RESTful API**：由 FastAPI 驅動的後端，為求解器提供程式化的介面。
*   **多種求解演算法**：提供從精確演算法到元啟發式演算法的多種求解器。
*   **程序化謎題生成**：一個強大的腳本，可生成大量新的謎題資料集，位於 `src/core/puzzle_generation/`。
*   **豐富的視覺化**：可生成解謎過程的詳細 GIF 動畫和靜態圖片。

### 求解演算法
- **精確演算法**: 深度優先搜尋 (DFS), A* 搜尋, 約束編程 (CP-SAT)。
- **元啟發式演算法**: 蒙地卡羅、模擬退火、遺傳演算法、禁忌搜尋、粒子群優化等。

## 專案結構

```
linkedin-zip-challenge/
├── src/
│   ├── app/                   # FastAPI 後端應用程式
│   │   ├── routers/           # API 端點路由器 (例如: solver, echo)
│   │   ├── schemas/           # Pydantic 資料模型
│   │   └── main.py            # 主要 FastAPI 應用定義與啟動
│   ├── core/                  # 核心謎題邏輯與求解器
│   │   ├── puzzle_generation/ # 程序化謎題生成腳本
│   │   ├── solvers/           # 所有求解演算法實作
│   │   ├── tests/             # 所有元件的 Pytest 單元測試
│   │   └── utils.py           # 共用工具 (解析、視覺化等)
│   ├── ui/                    # Gradio UI 應用程式
│   │   └── gradio_app.py      # Gradio 介面定義
│   └── settings.py            # 全域應用程式設定
├── .env                       # 環境變數 (例如: APP_PORT)
├── pyproject.toml             # `uv` 的專案依賴性設定
└── README.md                  # 本檔案
```

## 開始使用

### 環境需求
*   Python 3.11
*   [uv](https://github.com/astral-sh/uv) (用於套件管理)

### 安裝

1.  **複製本專案**

2.  **建立虛擬環境並安裝依賴套件：**
    ```bash
    # 此指令將會安裝 pyproject.toml 和 uv.lock 中所有的依賴
    uv sync
    ```

### 執行網頁應用程式

1.  **(可選) 設定 Port：**
    在專案根目錄建立一個 `.env` 檔案，並加入以下內容以更改預設的 Port (8008)：
    ```
    APP_PORT=7440
    ```

2.  **啟動伺服器：**
    在專案根目錄執行以下指令：
    ```bash
    python -m src.app.main
    ```

3.  **訪問 UI 介面：**
    打開您的網頁瀏覽器，並前往 `http://127.0.0.1:7440` (或您自訂的 Port)。

### 如何使用操作介面

應用程式提供了三個分頁，功能最強大的是 **"Puzzle Solver (Interactive)"** (互動式求解器) 分頁。

#### 互動式求解器使用指南：

1.  **定義網格大小**: 
    -   設定您想要的 `Rows (m)` (行數) 和 `Columns (n)` (列數)。
    -   點擊 **"Create Grid"** 按鈕，下方會出現一個空白的謎題編輯器。

2.  **編輯謎題格子**: 
    -   在 "Puzzle Cells" 網格中，點擊儲存格以輸入內容：
        -   **數字** (例如 `1`, `2`, `12`): 定義路徑必須依序經過的路徑點。
        -   **障礙物** (例如 `x`): 定義路徑無法進入的障礙格。
    -   在您編輯的過程中，右側的 **"Live Puzzle Preview"** (即時謎題預覽) 將會自動更新。

3.  **定義牆壁**: 
    -   在左下方的 "Define Walls" 區塊，使用四個數字框來定義一道牆所連接的兩個**相鄰**格子的座標。
    -   例如，若要在一道牆 `(0,0)` 和 `(0,1)` 之間，請在第一排的框中填入 `0`, `0`，在第二排的框中填入 `0`, `1`。
    -   點擊 **"Add Wall"**。牆壁會被加入到 "Current Walls" 列表中，並以紅線形式出現在即時預覽圖上。

4.  **刪除牆壁**: 
    -   在 "Current Walls" 列表中，**點擊**您想刪除的牆壁對應的那一列。
    -   點擊 **"Delete Selected Wall"** 按鈕。

5.  **解出謎題**: 
    -   從 **"Select Solver"** 下拉選單中選擇您想使用的演算法。
    -   點擊 **"Solve Puzzle"** 按鈕。
    -   解謎動畫與最終結果將會顯示在右側。

6.  **重設**: 
    -   隨時點擊 **"重設 (Reset)"** 按鈕來清空所有輸入，重新開始。

## 開發

### 執行測試
若要執行完整的測試套件並生成報告：
```powershell
.\run_tests.bat
```
測試結果和詳細日誌將會儲存在 `src/core/tests/reports/` 目錄下。

### 開發日誌
若要查看詳細的專案開發時程記錄，請參閱 [開發日誌](./dev_log.md)。
